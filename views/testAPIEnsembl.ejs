<!doctype html>
<html lang='fr'>

<head>
  <meta charset="utf-8">
  <title>Test API Ensembl</title>
  <link rel="stylesheet" href="Stylesheet/APIEnsembl.css">
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="https://www.ncbi.nlm.nih.gov/projects/sviewer/js/sviewer.js"></script>
</head>

<body>
  <div id='content'>
    <% if (data) { %>
      <div id="RsIdbox">
        <%= data.name %>
          <!-- <form id="form_fileup" method="post" action="/testAPIEnsembl/fileup" enctype="multipart/form-data">
            <input type='file' id="file" name='fileToUpload'>
            <br/>
            <input type='submit' value='valider'> </form>-->
      </div>
      <div id='inner-content'>
        <div id='contentEnsembl'>
          <p>Ensembl Information</p>
          <div id="info_rs">
            <table id="info_base">
              <tr>
                <th>Consequence</th>
                <td>
                  <%= data.conseq %>
                </td>
              </tr>
              <tr>
                <th>Allele</th>
                <td>
                  <%= data.allele %>
                </td>
              </tr>
              <tr>
                <th>MAF</th>
                <td>
                  <%= data.maf %>
                </td>
              </tr>
              <tr>
                <th>Ancestral</th>
                <td>
                  <%= data.ancestral %>
                </td>
              </tr>
              <tr>
                <th>Location</th>
                <td>
                  <%= data.location %>
                </td>
              </tr>
              <tr>
                <th>VCF</th>
              </tr>
              <tr>
                <th>Start</th>
                <td>
                  <%= data.start %>
                </td>
              </tr>
              <tr>
                <th>End</th>
                <td>
                  <%= data.end %>
                </td>
              </tr>
              <tr>
                <th>Sequence_Region</th>
                <td>
                  <%= data.seq %>
                </td>
              </tr>
              <tr>
                <th>Clinical Significance</th>
                <td>
                  <%= data.clinicSigni %>
                </td>
              </tr>
              <tr>
                <th>Variant</th>
                <td>
                  <%
        for (let i in data.variant) {
      %>
                    <%= data.variant[i] %>
                      <br/>
                      <%
        }
      %>
                </td>
              </tr>
              <tbody> </tbody>
            </table>
          </div>
        </div>
        <div id='contentGtext'>
          <p>GTEX Information</p>
          <div id="info_rs">
            <table id="info_var_gen">
              <thead id="tabl_var_thead">
                <th>Genecode Id</th>
                <th>Gene Symbol</th>
                <th>Variant Id</th>
                <th>SNP</th>
              </thead>
              <tbody>
                <% for (let i in data.gtexvalue) {
              %>
                  <tr>
                    <td>
                      <%= data.gtexvalue[i].geneid%>
                    </td>
                    <td>
                      <%= data.gtexvalue[i].symbol%>
                    </td>
                    <td>
                      <%= data.gtexvalue[i].variantid%>
                    </td>
                    <td>
                      <%= data.gtexvalue[i].snp%>
                    </td>
                  </tr>
                  <%
            }
            %>
              </tbody>
            </table>
            <% }%>
          </div>
        </div>
        <div id='contentGwas'>
          <p>GWAS Information</p>
          <div id="info_rs">
            <p>test 3</p>
          </div>
        </div>
      </div>
  </div>
  <script type="text/javascript">
    /*
                                                                                        function ajax(page, callback, post) {
                                                                                          var xhr
                                                                                          if (window.XMLHttpRequest || window.ActiveXObject) {
                                                                                            if (window.XMLHttpRequest) {
                                                                                              xhr = new XMLHttpRequest()
                                                                                            } else {
                                                                                              try {
                                                                                                xhr = new ActiveXObject("Msxml2.XMLHTTP")
                                                                                              } catch (e) {
                                                                                                xhr = new ActiveXObject("Microsoft.XMLHTTP")
                                                                                              }
                                                                                            }
                                                                                          } else {
                                                                                            document.location.href = page
                                                                                          }
                                                                                          xhr.onreadystatechange = function() {
                                                                                            if (typeof callback != "undefined") {
                                                                                              callback(xhr.responseText);
                                                                                            }
                                                                                          };
                                                                                          xhr.open("GET", page, true)
                                                                                          xhr.send(null)
                                                                                        }
                                                                                        ajax("SNP.txt", function(data) {
                                                                                          console.log(data)
                                                                                          document.body.innerHTML = data.split(/\n/g)[0] // blabla
                                                                                        })
                                                                                    */

  </script>
</body>

</html>
