<!doctype html>
<html lang='fr'>

<head>
  <meta charset="utf-8">
  <title>Test API Ensembl</title>
  <link rel="stylesheet" href="Stylesheet/APIEnsembl.css">
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="https://www.ncbi.nlm.nih.gov/projects/sviewer/js/sviewer.js"></script>
</head>

<body>
  <div id='content'>
    <%
    for (let i = 0; i < data.length; i++) {
      console.log('data : ' +  data[i])
    if (data[i]) { %>
      <div id="RsIdbox">
        <%= data[i].name %>
          <!-- <form id="form_fileup" method="post" action="/testAPIEnsembl/fileup" enctype="multipart/form-data[i]">
            <input type='file' id="file" name='fileToUpload'>
            <br/>
            <input type='submit' value='valider'> </form>-->
      </div>
      <div id='inner-content'>
        <div id='contentEnsembl'>
          <p>Ensembl Information</p>
          <div id="info_rs">
            <table id="info_base">
              <tr>
                <th>Consequence</th>
                <td>
                  <%= data[i].conseq %>
                </td>
              </tr>
              <tr>
                <th>Allele</th>
                <td>
                  <%= data[i].allele %>
                </td>
              </tr>
              <tr>
                <th>MAF</th>
                <td>
                  <%= data[i].maf %>
                </td>
              </tr>
              <tr>
                <th>Ancestral</th>
                <td>
                  <%= data[i].ancestral %>
                </td>
              </tr>
              <tr>
                <th>Location (38)</th>
                <td>
                  <%= data[i].location %>
                </td>
              </tr>
              <tr>
                <th>Location (37)</th>
                <td>
                  <%= data[i].location2 %>
                </td>
              </tr>
              <tr>
                <th>VCF</th>
              </tr>
              <tr>
                <th>Start</th>
                <td>
                  <%= data[i].start %>
                </td>
              </tr>
              <tr>
                <th>End</th>
                <td>
                  <%= data[i].end %>
                </td>
              </tr>
              <tr>
                <th>Sequence_Region</th>
                <td>
                  <%= data[i].seq %>
                </td>
              </tr>
              <tr>
                <th>Clinical Significance</th>
                <td>
                  <%= data[i].clinicSigni %>
                </td>
              </tr>
              <tr>
                <th>Variant</th>
                <td>
                  <%
        for (let j in data[i].variant) {
      %>
                    <%= data[i].variant[j] %>
                      <br/>
                      <%
        }
      %>
                </td>
              </tr>
              <tbody> </tbody>
            </table>
          </div>
        </div>
        <div id='contentGtext'>
          <p>GTEX Information</p>
          <div id="info_rs">
            <table id="info_var_gen">
              <thead id="tabl_var_thead">
                <th>Genecode Id</th>
                <th>Gene Symbol</th>
                <th>Variant Id</th>
                <th>SNP</th>
              </thead>
              <tbody>
                <% for (let j in data[i].gtexvalue) {
              %>
                  <tr>
                    <td>
                      <%= data[i].gtexvalue[j].geneid%>
                    </td>
                    <td>
                      <%= data[i].gtexvalue[j].symbol%>
                    </td>
                    <td>
                      <%= data[i].gtexvalue[j].variantid%>
                    </td>
                    <td>
                      <%= data[i].gtexvalue[j].snp%>
                    </td>
                  </tr>
                  <%
            }
            %>
              </tbody>
            </table>

          </div>
        </div>
        <div id='contentGwas'>
          <p>GWAS Information</p>
          <div id="info_rs">
            <table id="info_var_gen">
              <thead id="tabl_var_thead">
                <th>Name</th>
                <th>RiskFrequency</th>
                <th>pvalue</th>
                <th>range</th>

                <th></th>
              </thead>
              <tbody>
                <% for (let j in data[i].gwasvalue) {
              %>
                  <tr>
                    <td>
                      <%= data[i].gwasvalue[j].name%>
                    </td>
                    <td>
                      <%= data[i].gwasvalue[j].riskFrequency%>
                    </td>
                    <td>
                      <%= data[i].gwasvalue[j].pvalue%>
                    </td>
                    <td>
                      <%= data[i].gwasvalue[j].range%>
                    </td>
                  </tr>
                  <%
            }
            %>
              </tbody>
            </table>
            <% } %>
          </div>
        </div>
      </div>
      <% } %>
  </div>
</body>

</html>
